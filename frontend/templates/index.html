<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP-Server Development Platform</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">
                    <i class="fas fa-microchip"></i>
                    MCP-Server Development Platform
                </h1>
                <div class="header-info">
                    <span class="platform-badge">Raspberry Pi 5</span>
                    <div class="status-indicator" id="connectionStatus">
                        <i class="fas fa-circle"></i>
                        <span>Connected</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Project Management Panel -->
            <aside class="project-panel">
                <div class="panel-header">
                    <h2>Project Management</h2>
                    <button class="btn btn-primary" onclick="showCreateProjectModal()">
                        <i class="fas fa-plus"></i>
                        New Project
                    </button>
                </div>

                <!-- Project Actions -->
                <div class="project-actions" id="projectActions" style="display: none;">
                    <button class="btn btn-warning" onclick="installDependencies()">
                        <i class="fas fa-download"></i>
                        Install Dependencies
                    </button>
                    <button class="btn btn-success" onclick="deployService()">
                        <i class="fas fa-rocket"></i>
                        Deploy Service
                    </button>
                </div>

                <!-- Project List -->
                <div class="project-list">
                    <h3>Recent Projects</h3>
                    <div id="projectsContainer">
                        <div class="project-item loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            Loading projects...
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Debug & Testing Area -->
            <section class="debug-area">
                <div class="debug-header">
                    <h2>MCP Debug & Testing</h2>
                    <div class="debug-controls">
                        <button class="btn btn-secondary" onclick="refreshDebugInfo()">
                            <i class="fas fa-sync"></i>
                            Refresh
                        </button>
                        <button class="btn" onclick="toggleDebugSession()" id="debugToggleBtn2">
                            <i class="fas fa-bug"></i>
                            <span id="debugToggleText2">Start Debug</span>
                        </button>
                    </div>
                </div>

                <!-- Debug Tabs -->
                <div class="debug-tabs">
                    <button class="tab-btn active" onclick="switchTab('terminal')">
                        <i class="fas fa-terminal"></i>
                        Terminal
                    </button>
                    <button class="tab-btn" onclick="switchTab('deployment')">
                        <i class="fas fa-cloud"></i>
                        Deployment
                    </button>
                </div>

                <!-- Terminal Tab -->
                <div class="tab-content active" id="terminalTab">
                    <div class="tools-container">
                        <!-- Terminal Log (Left Side) -->
                        <div class="terminal-log-section">
                            <div class="terminal-container">
                                <div class="terminal-header">
                                    <div class="terminal-title">
                                        <i class="fas fa-terminal"></i>
                                        Development Terminal
                                    </div>
                                    <div class="terminal-controls">
                                        <button class="btn btn-secondary btn-sm" onclick="clearTerminal()">
                                            <i class="fas fa-trash"></i>
                                            Clear
                                        </button>
                                        <button class="btn btn-secondary btn-sm" onclick="scrollToBottom()">
                                            <i class="fas fa-arrow-down"></i>
                                            Bottom
                                        </button>
                                    </div>
                                </div>
                                <div class="terminal-content" id="terminalContent">
                                    <div class="terminal-line startup">
                                        <span class="timestamp">[00:00:00]</span>
                                        <span class="level info">INFO</span>
                                        <span class="message">ðŸš€ MCP Development Platform initialized</span>
                                    </div>
                                    <div class="terminal-line">
                                        <span class="timestamp">[00:00:00]</span>
                                        <span class="level info">INFO</span>
                                        <span class="message">ðŸ’¡ Select a project to start development</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tool Testing (Right Side) -->
                        <div class="tool-testing">
                            <h3>
                                <i class="fas fa-wrench"></i>
                                Quick Tool Testing
                            </h3>
                            <div class="test-form">
                                <div class="form-group">
                                    <label for="toolSelect">Select Tool</label>
                                    <select id="toolSelect" onchange="updateToolParams()">
                                        <option value="">Select a tool to test...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="toolParams">Parameters (JSON)</label>
                                    <textarea id="toolParams" placeholder='{"param1": "value1", "param2": "value2"}' rows="4"></textarea>
                                </div>
                                <button class="btn btn-primary" onclick="testTool()" id="testToolBtn" disabled>
                                    <i class="fas fa-play"></i>
                                    Test Tool
                                </button>
                            </div>
                            <div class="test-results">
                                <h4>Test Results</h4>
                                <div class="results-content" id="testResults">
                                    <div class="no-data">
                                        <i class="fas fa-flask"></i>
                                        <p>No test results yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Deployment Tab -->
                <div class="tab-content" id="deploymentTab">
                    <div class="deployment-container">
                        <div class="deployment-config">
                            <h3>Deployment Configuration</h3>
                            <div class="config-form">
                                <div class="form-group">
                                    <label for="serviceName">Service Name</label>
                                    <input type="text" id="serviceName" placeholder="my-mcp-service">
                                </div>
                                <div class="form-group">
                                    <label for="servicePort">Port</label>
                                    <input type="number" id="servicePort" placeholder="3000" min="1024" max="65535">
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="autoStart" checked>
                                        Auto-start on boot
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="enableLogging" checked>
                                        Enable logging
                                    </label>
                                </div>
                                <button class="btn btn-primary" onclick="deployService()" id="deployBtn">
                                    <i class="fas fa-rocket"></i>
                                    Deploy Service
                                </button>
                            </div>
                        </div>
                        
                        <div class="deployment-status" id="deploymentStatus">
                            <h3>Deployment Status</h3>
                            <div class="status-content">
                                <div class="no-data">
                                    <i class="fas fa-cloud"></i>
                                    <p>Service not deployed</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Deployment Logs integrated into deployment tab -->
                        <div class="deployment-logs">
                            <h3>Deployment Logs</h3>
                            <div class="logs-controls">
                                <button class="btn btn-secondary" onclick="refreshDeploymentLogs()">
                                    <i class="fas fa-sync"></i>
                                    Refresh Logs
                                </button>
                                <button class="btn btn-secondary" onclick="clearDeploymentLogs()">
                                    <i class="fas fa-trash"></i>
                                    Clear
                                </button>
                            </div>
                            <div class="logs-content" id="deploymentLogsContent">
                                <div class="no-data">
                                    <i class="fas fa-file-text"></i>
                                    <p>No deployment logs available</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-item">
                <span id="currentProject">No project selected</span>
            </div>
            <div class="status-item">
                <span id="debugStatus">Debug: Inactive</span>
            </div>
            <div class="status-item">
                <span id="deploymentStatusFooter">Deployment: None</span>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <div class="modal" id="createProjectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Project</h3>
                <button class="modal-close" onclick="hideCreateProjectModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modalProjectName">Project Name</label>
                    <input type="text" id="modalProjectName" placeholder="my-mcp-server" required>
                </div>
                <div class="form-group">
                    <label for="modalProjectDescription">Description</label>
                    <textarea id="modalProjectDescription" placeholder="Optional description"></textarea>
                </div>
                <div class="form-group">
                    <label for="modalPythonVersion">Python Version</label>
                    <select id="modalPythonVersion">
                        <option value="3.11">Python 3.11</option>
                        <option value="3.10">Python 3.10</option>
                        <option value="3.12">Python 3.12</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideCreateProjectModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createProject()">Create</button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Scripts -->
    <script src="/static/js/api.js?v=8"></script>
    <script src="/static/js/ui.js?v=8"></script>
    <script src="/static/js/app.js?v=8"></script>
</body>
</html> 